{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["const elements = {\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  cat: document.querySelector('.cat-info'),\n};\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\nconst API_KEY =\n  'live_RjEIYRa9UIQiuCs0GBjhWjiTFUMeoAxHOIJdhn6UnuIPCQmVsxmCCshAFLBdwlby';\n\nelements.error.style.display = 'none';\n\nfunction fetchBreeds() {\n  const END_POINT = '/breeds';\n  return fetch(`${BASE_URL}${END_POINT}`, {\n    headers: {\n      'x-api-key': API_KEY,\n    },\n  })\n    .then(handleResponse)\n    .catch(handleError);\n}\n\nfunction fetchCatByBreed(breedId) {\n  const END_POINT = '/images/search';\n  const params = new URLSearchParams({\n    breed_ids: breedId,\n  });\n  return fetch(`${BASE_URL}${END_POINT}?${params}`, {\n    headers: {\n      'x-api-key': API_KEY,\n    },\n  })\n    .then(handleResponse)\n    .catch(handleError);\n}\n\nfunction handleResponse(resp) {\n  if (!resp.ok) {\n    handleError();\n    throw new Error(resp.statusText);\n  }\n  return resp.json();\n}\n\nfunction handleError() {\n  elements.error.style.display = 'block';\n  elements.error.style.color = 'red';\n  setTimeout(() => {\n    elements.error.style.display = 'none';\n  }, 5000);\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import { fetchBreeds, fetchCatByBreed } from '/cat-api';\nimport SlimSelect from 'slim-select';\nimport '../node_modules/slim-select/dist/slimselect.css';\n\nconst elements = {\n  breedSelect: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  error: document.querySelector('.error'),\n  cat: document.querySelector('.cat-info'),\n};\n\nlet breedSelected = false;\n\nfunction onSelect(value) {\n  elements.cat.innerHTML = '';\n  makeCatCard(value);\n  breedSelected = true;\n}\n\nconst slimSelect = new SlimSelect({\n  select: '.breed-select',\n  settings: {\n    placeholderText: 'Select a breed',\n  },\n});\n\nslimSelect.selectEl.addEventListener('change', event => {\n  onSelect(event.target.value);\n});\n\nfunction makeCatCard(breedId) {\n  if (!breedSelected) return;\n  showLoader();\n  fetchCatByBreed(breedId)\n    .then(data => {\n      elements.cat.innerHTML = createCatCardMarkup(data);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction createCatCardMarkup(arr) {\n  if (!arr || arr.length === 0) {\n    return '<p>No information available for this breed.</p>';\n  }\n  const { description, name, temperament } = arr[0].breeds[0];\n\n  return `\n    <img src=\"${arr[0].url}\" alt=\"${name}\" width=\"300\"/>\n    <h1 class=\"cat-info_name-breed\">${name}</h1>\n    <p class=\"cat-info_description\">${description}</p>\n    <p class=\"cat-info_name-habbit\">${temperament}</p>\n  `;\n}\n\nfunction init() {\n  showLoader();\n  fetchBreeds()\n    .then(data => {\n      const selectData = data.map(({ id, name }) => ({\n        text: name,\n        value: id,\n      }));\n      slimSelect.setData(selectData);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\ninit();\n\nfunction showLoader() {\n  elements.loader.style.display = 'block';\n  //   elements.breedSelect.style.display = 'none';\n}\n\nfunction hideLoader() {\n  elements.loader.style.display = 'none';\n  //   elements.breedSelect.style.display = 'block';\n}\n"],"names":["elements","BASE_URL","API_KEY","fetchBreeds","handleResponse","handleError","fetchCatByBreed","breedId","END_POINT","params","resp","breedSelected","onSelect","value","makeCatCard","slimSelect","SlimSelect","event","showLoader","data","createCatCardMarkup","hideLoader","arr","description","name","temperament","init","selectData","id"],"mappings":"svBAAA,MAAMA,EAAW,CACf,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,IAAK,SAAS,cAAc,WAAW,CACzC,EAEMC,EAAW,+BACXC,EACJ,wEAEFF,EAAS,MAAM,MAAM,QAAU,OAE/B,SAASG,GAAc,CAErB,OAAO,MAAM,GAAGF,WAAwB,CACtC,QAAS,CACP,YAAaC,CACd,CACL,CAAG,EACE,KAAKE,CAAc,EACnB,MAAMC,CAAW,CACtB,CAEA,SAASC,EAAgBC,EAAS,CAChC,MAAMC,EAAY,iBACZC,EAAS,IAAI,gBAAgB,CACjC,UAAWF,CACf,CAAG,EACD,OAAO,MAAM,GAAGN,IAAWO,KAAaC,IAAU,CAChD,QAAS,CACP,YAAaP,CACd,CACL,CAAG,EACE,KAAKE,CAAc,EACnB,MAAMC,CAAW,CACtB,CAEA,SAASD,EAAeM,EAAM,CAC5B,GAAI,CAACA,EAAK,GACR,MAAAL,IACM,IAAI,MAAMK,EAAK,UAAU,EAEjC,OAAOA,EAAK,MACd,CAEA,SAASL,GAAc,CACrBL,EAAS,MAAM,MAAM,QAAU,QAC/BA,EAAS,MAAM,MAAM,MAAQ,MAC7B,WAAW,IAAM,CACfA,EAAS,MAAM,MAAM,QAAU,MAChC,EAAE,GAAI,CACT,CC/CA,MAAMA,EAAW,CACf,YAAa,SAAS,cAAc,eAAe,EACnD,OAAQ,SAAS,cAAc,SAAS,EACxC,MAAO,SAAS,cAAc,QAAQ,EACtC,IAAK,SAAS,cAAc,WAAW,CACzC,EAEA,IAAIW,EAAgB,GAEpB,SAASC,EAASC,EAAO,CACvBb,EAAS,IAAI,UAAY,GACzBc,EAAYD,CAAK,EACjBF,EAAgB,EAClB,CAEA,MAAMI,EAAa,IAAIC,EAAW,CAChC,OAAQ,gBACR,SAAU,CACR,gBAAiB,gBAClB,CACH,CAAC,EAEDD,EAAW,SAAS,iBAAiB,SAAUE,GAAS,CACtDL,EAASK,EAAM,OAAO,KAAK,CAC7B,CAAC,EAED,SAASH,EAAYP,EAAS,CACvBI,IACLO,IACAZ,EAAgBC,CAAO,EACpB,KAAKY,GAAQ,CACZnB,EAAS,IAAI,UAAYoB,EAAoBD,CAAI,CACvD,CAAK,EACA,QAAQ,IAAM,CACbE,GACN,CAAK,EACL,CAEA,SAASD,EAAoBE,EAAK,CAChC,GAAI,CAACA,GAAOA,EAAI,SAAW,EACzB,MAAO,kDAET,KAAM,CAAE,YAAAC,EAAa,KAAAC,EAAM,YAAAC,CAAa,EAAGH,EAAI,GAAG,OAAO,GAEzD,MAAO;AAAA,gBACOA,EAAI,GAAG,aAAaE;AAAA,sCACEA;AAAA,sCACAD;AAAA,sCACAE;AAAA,GAEtC,CAEA,SAASC,GAAO,CACdR,IACAf,EAAa,EACV,KAAKgB,GAAQ,CACZ,MAAMQ,EAAaR,EAAK,IAAI,CAAC,CAAE,GAAAS,EAAI,KAAAJ,MAAY,CAC7C,KAAMA,EACN,MAAOI,CACR,EAAC,EACFb,EAAW,QAAQY,CAAU,CACnC,CAAK,EACA,QAAQ,IAAM,CACbN,GACN,CAAK,CACL,CAEAK,IAEA,SAASR,GAAa,CACpBlB,EAAS,OAAO,MAAM,QAAU,OAElC,CAEA,SAASqB,GAAa,CACpBrB,EAAS,OAAO,MAAM,QAAU,MAElC"}